{% extends "bootstrap/base.html" %}

{% block title %}
Demo App
{% endblock %}



{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('.static', filename='starter-template.css')}}">
    

<script src="/static/jquery.min.js"></script>
<script src="/static/jquery.cookie.js"></script>

<script src="/static/bootstrap.min.js"></script>
<!--
<script src="/static/md5.min.js"></script>
-->
<script src="http://cdn.jsdelivr.net/vue/2.0.3/vue.js"></script>
<script>
  /*
$(function(){
  console.log($("#camera0").attr('src'));
}); // document.ready

setInterval(function(){
    $("#camera0").attr("src", "upload/cam0_latest.jpg?"+new Date().getTime());
},2000);
*/



</script>

{% endblock %}
{% block content %}
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
	<span class="sr-only">Toggle navigation</span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">AI dashboard</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li class="inactive"><a href="#">Devices</a></li>
        <li class="inactive"><a href="#">Settings</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>

<div class="container" id="app">
  <div class="split left">
    <div class="cameras" id="cameras">
      <div class="camera" v-for="camera in cameras"><img v-bind:src="camera.uri+'?'+new Date().getTime()" width="300" /> 
        <!-- chart here -->
      </div>
      <p>[[ right_message ]]</p>
    </div>  
</div><!-- /.container -->

<script>
  /*
$(function(){
  console.log($("#camera0").attr('src'));
}); // document.ready

setInterval(function(){
    $("#camera0").attr("src", "upload/cam0_latest.jpg?"+new Date().getTime());
},2000);
*/
var num_camera=1;

var app = new Vue({
  el: '#app',
  delimiters: ['[[',']]'],
  data: {
    right_message: 'Hello Vue!',
    imageSRC: "/static/default.jpg",
    cameras: []

  },
  created:function(){
      console.log("ASDFASDF");
  },
  mounted:function(){
    var _this=this;
    $.getJSON("/api/cameras", function(response_data){
      _this.cameras=response_data.cameras;
    });
  }

});

setInterval(function(){
  //app.imageSRC0="upload/cam0_latest.jpg?"+new Date().getTime();
  $.getJSON("/api/cameras", function(response_data){
    app.cameras=response_data.cameras;
  });

  $.getJSON("/api/camera_detection", function(response_data){
    console.log(response_data);
  });
},2000);

</script>
{% endblock %}
